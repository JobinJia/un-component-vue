"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("vue"),S=require("../../../../shard/utils/is.js");function g(m){const s=v.shallowRef(m),a=(e,c,r,i=s.value)=>{let n=[...i];return r?e.forEach((t,l)=>{n.splice(c+l,0,t)}):n=[...n.slice(0,c),...e,...n.slice(c)],n},u=(e,c,r)=>{let i=c?e.length:0;return r&&(i=S.isNumber(r)?r:e.findIndex(n=>n.key===r)),i},d=(e,c,r,i=s.value,n)=>{const t=[...i];for(let l=0;l<t.length;l++){const o=t[l];if(o.key===r){if(o.children&&o.group!==void 0){const f=u(o.children,c,n);console.log(f),o.children=a(e,f,c,o.children);break}}else o.children&&d(e,c,r,o.children,n)}return t},h=(e,c=s.value)=>c.filter(r=>(r.children&&(r.children=h(e,r.children)),!e.includes(r.key)));return{schemasRef:s,addSchema:(e,c)=>{const{key:r,direction:i,groupKey:n}=Object.assign({},{direction:!0,groupKey:void 0},c),t=Array.isArray(e)?e:[e];if(n===void 0){const l=u(s.value,i,r);if(l<0){console.warn(`Schemas not find item with key: ${r}`);return}s.value=a(t,l,i)}else s.value=d(t,i,n,s.value,r)},delSchema:e=>{const c=Array.isArray(e)?e:[e];s.value=h(c)}}}exports.useFormSchemas=g;
